% Only load if option mathematics given
\ifDocumentmathematics
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% MATH COMMANDS                                                              %%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%%
% @sample \matr{M}: Matrix notation for M
% @sample \matr[P]{M}: Matrix notation for M with pre-superscript P
% @sample \matr[A][B]{M}: Matrix notation for M with pre-subscript A and pre-superscript B
% @see http://tex.stackexchange.com/questions/199789/which-bold-style-is-recommended-for-matrix-notation
%%
\DeclareDocumentCommand{\matr}{ o o m }{%
  \IfValueTF{#1}{%
    \IfValueTF{#2}{%
      \prescript{#1}{}{\bm{#3}}%
    }{%
      \prescript{#2}{#1}{\bm{#3}}%
    }%
  }{%
    \bm{#3}%
  }%
}%

%%
% @sample \vect{q}: Vector notation for q
% @sample \vect[P]{q}: Vector notation for q with pre-superscript P
% @sample \vect[A][B]{q}: Vector notation for q with pre-subscript A and pre-superscript B
%%
\DeclareDocumentCommand{\vect}{ o o m }{%
  \IfValueTF{#1}{%
    \IfValueTF{#2}{%
      \prescript{#1}{}{\bm{#3}}%
    }{%
      \prescript{#2}{#1}{\bm{#3}}%
    }%
  }{%
    \bm{#3}%
  }%
}%

% Absolute value
% \abs{x} => \lvert x \rvert
\DeclarePairedDelimiterX{\abs}[1]{\lvert}{\rvert}{#1}%

% Norm
% \norm{a_i} => \lVert a_i \rVert
\DeclarePairedDelimiterX{\norm}[1]{\lVert}{\rVert}{#1}%

% Power
% \pow{x} => {x}^{2}%
% \pow[3]{x} => {x}^{3}%
\DeclareDocumentCommand{\pow}{O{2} m}{%
  #2^{#1}%
}%

% Skew-symmetric matrix
% \skewm{x} => [ x ]_{\times}%
% \skewm[\Bigg]{x} => \Bigg[ x \Bigg]_{\times}%
\DeclarePairedDelimiterX{\skewm}[1]{[}{]^{\mkern-2.5mu\times}}{#1}%

% Cross product
% \crosp{#1}{#2} => {#1} \times {#2}%
\DeclareDocumentCommand{\crossp}{m m}{%
  {#1} \times {#2}%
}%

% Diagonal
% \diag => diag for a matrix as diagonal of the elements
\DeclareMathOperator{\diag}{diag}%

% Mathemtical sign operator
\DeclareMathOperator{\sign}{sign}%


% @see http://tex.stackexchange.com/questions/135944/commath-and-ifinner
% Differential operator (upface d)
% \DeclareMathOperator{\dif}{d \!}%
\DeclareDocumentCommand{\dif}{o}{
  \operatorname{d}%
  \IfValueT{#1}{%
    _{#1}%
  }%
  \!%
}%
% Derivative operator (upface D)
% \DeclareMathOperator{\Dif}{D \!}%
\DeclareDocumentCommand{\Dif}{o}{
  \operatorname{D}%
  \IfValueT{#1}{%
    _{#1}%
  }%
  \!%
}%

% Command for partial derivatives. The first argument denotes the function and the second argument denotes the variable with respect to which the derivative is taken. The optional argument denotes the order of differentiation. The style (text style/display style) is determined automatically
\providecommand{\pd}[3][]{%
  \frac{ \partial{^{#1}}#2 }{ \partial{#3^{#1}} }%
}%

% \tpd[2]{f}{k} denotes the second partial derivative of f with respect to k
% The first letter t means "text style"
\providecommand{\tpd}[3][]{\mathinner{%
  \tfrac{ \partial{^{#1}}#2 }{ \partial{#3^{#1}} }%
}}%
% \dpd[2]{f}{k} denotes the second partial derivative of f with respect to k
% The first letter d means "display style"
\providecommand{\dpd}[3][]{\mathinner{%
  \dfrac{ \partial{^{#1}}#2 }{ \partial{#3^{#1}} }%
}}%

% mixed derivative - analogous to the partial derivative command
% \md{f}{5}{x}{2}{y}{3}%
\providecommand{\md}[6]{%
  \frac{ \partial{^{#2}}#1 }{ \partial{#3^{#4}}\partial{#5^{#6}} }%
}%

% \tpd[2]{f}{k} denotes the second partial derivative of f with respect to k
% The first letter t means "text style"
\providecommand{\tmd}[6]{\mathinner{%
  \tfrac{ \partial{^{#2}}#1 }{ \partial{#3^{#4}}\partial{#5^{#6}} }%
}}%
% \dpd[2]{f}{k} denotes the second partial derivative of f with respect to k
% The first letter d means "display style"
\providecommand{\dmd}[6]{\mathinner{%
  \dfrac{ \partial{^{#2}}#1 }{ \partial{#3^{#4}}\partial{#5^{#6}} }%
}}%

% ordinary derivative - analogous to the partial derivative command
\providecommand{\od}[3][]{%
  \frac{ \dif{^{#1}}#2 }{ \dif{#3^{#1}} }%
}%

\providecommand{\tod}[3][]{\mathinner{%
  \tfrac{ \dif{^{#1}}#2 }{ \dif{#3^{#1}} }%
}}%
\providecommand{\dod}[3][]{\mathinner{%
  \dfrac{ \dif{^{#1}}#2 }{ \dif{#3^{#1}} }%
}}%


% Total differential
% \td{x} => \dif{x}%
\DeclareDocumentCommand{\td}{ m }{%
  \dif{#1}%
}%

% Real value
\renewcommand{\Re}{\operatorname{Re}}%

% Imaginary value
\renewcommand{\Im}{\operatorname{Im}}%

% Transpose items
% \transp{A} => A^T
\DeclareDocumentCommand{\transp}{ m }{%
%  {#1}^{\intercal}%
%  {#1}^{\mkern-1.5mu\intercal}%
  {#1}^{\mkern-2.5mu\mathsf{T}}%
}%

% Transformation matrix from one system to another
% \trafom{O}{P} => \tensor[^P]{\matr{T}}{_O}%
% \trafom[Q]{O}{P} => \tensor[^P]{\matr{Q}}{_O}%
\DeclareDocumentCommand{\trafom}{ O{T} m m }{%
  \matr[#2][#3]{#1}%
}%

% Conjugate complex
\DeclareDocumentCommand{\conj}{ m }{%
  \overline{#1}%
}%

% Hermitian conjugate of matrix
\DeclareDocumentCommand{\hermconj}{ m }{%
  {#1}^{\mkern-5mu\mathsf{H}}%
}%

% Element inverse (usually used for matrix inverse)
% \inv{A} => A^{-1}%
\DeclareDocumentCommand{\inv}{ m }{%
  #1^{-1}%
}%

% Dot-product
% \dotp{a}{b} => a \cdot b
\DeclareDocumentCommand{\dotp}{m m}{%
  {#1} \cdot {#2}%
}%

% Unit axis coordinate vector
% \evec{x} => \vect{e}_{x} => e_x
% \evec{z} => \vect{e}_{z} => e_z
% \evec[k]{x} => \vect{k}_{x} => k_x
\DeclareDocumentCommand{\evec}{O{e} m}{%
  \vect{#1}_{\mc{#2}}%
}%

% Declare atant a math operator rendering atan2
\DeclareMathOperator{\arctantwo}{atan2}%

% Arcus tangent 2
% \atantwo{y}{x} => atan2(y, x)
\NewDocumentCommand{\arctant}{m m}{%
  \arctantwo \of{#1, #2}%
}%

% Math operator for the trace of matrix
\DeclareMathOperator{\trace}{tr}%

% Range of numbers
% \irange{m} => i = 1, ..., m
% \irange{m}{j} => j = 1, ..., m
% \irange[3]{m} => i = 1, 3, ..., m
% \irange[3]{m}{j} => j = 1, 3, ..., m
\NewDocumentCommand{\irange}{o m g}{%
  \def\runner{\IfValueTF{#3}{#3}{i}}%
  \IfValueTF{#1}{%
    {\runner = 1, #1, \ldots, #2}%
  }{%
    {\runner = 1, \ldots, #2}%
  }%
}%

% Well-scaled math subscripts
\DeclareDocumentCommand{\ms}{ m }{%
  {\mbox{\textscale{0.6}{\mc{#1}}}}%
}%

% Correct type setting of math subscripts for textual indices like "std" or "coeff".
% Do not use for variable indices like "i" or "j"
\DeclareDocumentCommand{\mc}{ m }{%
  \text{#1}%
}%

% Rotation matrix entry
\DeclareDocumentCommand{\rotscal}{ }{%
  R%
}%

%%
% @sample \rotmatr: Rotation matrix
% @sample \rotmatr[P]: Rotation matrix from coordinate system P into world system O
% @sample \rotmatr[A][B]: Rotation matrix from coordinate system A into system B
%%
\DeclareDocumentCommand{\rotmatr}{ o o }{%
  \IfValueTF{#1}{%
    \IfValueTF{#2}{%
      \matr[#2][#1]{\rotscal}%
    }{%
      \matr[][#1]{\rotscal}%
    }%
  }{%
    \matr{\rotscal}%
  }%
}%

% Rotation matrices about specific axes
% \rotx{\alpha} => \rotmatr_{x} \of{\alpha}%
\DeclareDocumentCommand{\rotx}{ g }{%
  \rotmatr_{\ms{x}}%
  \IfValueT{#1}{\of{#1}}%
}%

% \roty{\beta} => \rotmatr_{y} \of{\beta}%
\DeclareDocumentCommand{\roty}{ g }{%
  \rotmatr_{\ms{y}}%
  \IfValueT{#1}{\of{#1}}%
}%

% \rotz{\gamma} => \rotmatr_{z} \of{\gamma}%
\DeclareDocumentCommand{\rotz}{ g }{%
  \rotmatr_{\ms{z}}%
  \IfValueT{#1}{\of{#1}}%
}%

% Operator names for Imaginary and Real unit
\newcommand{\Imop}{\operatorname{Im}}%
\newcommand{\Reop}{\operatorname{Re}}%

% Imaginary unit i
\DeclareMathOperator{\imagu}{\mathrm{i}}%
\DeclareDocumentCommand{\imgu}{ }{%
  {\imagu\mkern1mu}%
}%

% Inverse hyperbolic functions i.e., more precisely, inverse hyperbolic math
% operators
\DeclareMathOperator{\sech}{sech}%
\DeclareMathOperator{\csch}{csch}%
\DeclareMathOperator{\arcsec}{arcsec}%
\DeclareMathOperator{\arccot}{arccot}%
\DeclareMathOperator{\arccsc}{arccsc}%
\DeclareMathOperator{\arccosh}{arccosh}%
\DeclareMathOperator{\arcsinh}{arcsinh}%
\DeclareMathOperator{\arctanh}{arctanh}%
\DeclareMathOperator{\arcsech}{arcsech}%
\DeclareMathOperator{\arccsch}{arccsch}%
\DeclareMathOperator{\arccoth}{arccoth}%


%% Trigonometric functions with parentheses around argument
% \prtrig{\sin}{\beta} => \sin \of{ \beta }%
\DeclareDocumentCommand{\prtrig}{ s m m }{%
  #2{%
    \IfBooleanTF{#1}{%
      \of*{#3}%
    }{%
      \of{#3}%
    }%
  }%
}%

% P arentheses around sine
\DeclareDocumentCommand{\psin}{ s m }{%
  \IfBooleanTF{#1}{%
    \prtrig*{\sin}{#2}%
  }{%
    \prtrig{\sin}{#2}%
  }%
}%

% Parentheses around cosine
\DeclareDocumentCommand{\pcos}{ s m }{%
  \IfBooleanTF{#1}{%
    \prtrig*{\cos}{#2}%
  }{%
    \prtrig{\cos}{#2}%
  }%
}%

% Parentheses around tangent
\DeclareDocumentCommand{\ptan}{ s m }{%
  \IfBooleanTF{#1}{%
    \prtrig*{\tan}{#2}%
  }{%
    \prtrig{\tan}{#2}%
  }%
}%

% Parentheses around secant
\DeclareDocumentCommand{\psec}{ s m }{%
  \IfBooleanTF{#1}{%
    \prtrig*{\sec}{#2}%
  }{%
    \prtrig{\sec}{#2}%
  }%
}%

% Parentheses around cosecant
\DeclareDocumentCommand{\pcsc}{ s m }{%
  \IfBooleanTF{#1}{%
    \prtrig*{\csc}{#2}%
  }{%
    \prtrig{\csc}{#2}%
  }%
}%

% Parentheses around cotangent
\DeclareDocumentCommand{\pcot}{ s m }{%
  \IfBooleanTF{#1}{%
    \prtrig*{\cot}{#2}%
  }{%
    \prtrig{\cot}{#2}%
  }%
}%


%% Inverse trigonometric functions with parentheses around argument
% Parentheses around arcus sine
\DeclareDocumentCommand{\parcsin}{ s m }{%
  \IfBooleanTF{#1}{%
    \prtrig*{\arcsin}{#2}%
  }{%
    \prtrig{\arcsin}{#2}%
  }%
}%

% Parentheses around arcus cosine
\DeclareDocumentCommand{\parccos}{ s m }{%
  \IfBooleanTF{#1}{%
    \prtrig*{\arccos}{#2}%
  }{%
    \prtrig{\arccos}{#2}%
  }%
}%

% Parentheses around arcus tangent
\DeclareDocumentCommand{\parctan}{ s m }{%
  \IfBooleanTF{#1}{%
    \prtrig*{\arctan}{#2}%
  }{%
    \prtrig{\arctan}{#2}%
  }%
}%

% Parentheses around arcus secant
\DeclareDocumentCommand{\parcsec}{ s m }{%
  \IfBooleanTF{#1}{%
    \prtrig*{\arcsec}{#2}%
  }{%
    \prtrig{\arcsec}{#2}%
  }%
}%

% Parentheses around arcus cosecant
\DeclareDocumentCommand{\parccsc}{ s m }{%
  \IfBooleanTF{#1}{%
    \prtrig*{\arccsc}{#2}%
  }{%
    \prtrig{\arccsc}{#2}%
  }%
}%

% Parentheses around arcus cotangent
\DeclareDocumentCommand{\parccot}{ s m }{%
  \IfBooleanTF{#1}{%
    \prtrig*{\arccot}{#2}%
  }{%
    \prtrig{\arccot}{#2}%
  }%
}%


%% Hyperbolic trigonometric functions with parentheses around argument
% Parentheses around sin hyperbolic
\DeclareDocumentCommand{\psinh}{ s m }{%
  \IfBooleanTF{#1}{%
    \prtrig*{\sinh}{#2}%
  }{%
    \prtrig{\sinh}{#2}%
  }%
}%

% Parentheses around cosine hyperbolic
\DeclareDocumentCommand{\pcosh}{ s m }{%
  \IfBooleanTF{#1}{%
    \prtrig*{\cosh}{#2}%
  }{%
    \prtrig{\cosh}{#2}%
  }%
}%

% Parentheses around cosine hyperbolic
\DeclareDocumentCommand{\ptanh}{ s m }{%
  \IfBooleanTF{#1}{%
    \prtrig*{\tanh}{#2}%
  }{%
    \prtrig{\tanh}{#2}%
  }%
}%

% Parentheses around cosine hyperbolic
\DeclareDocumentCommand{\pcoth}{ s m }{%
  \IfBooleanTF{#1}{%
    \prtrig*{\coth}{#2}%
  }{%
    \prtrig{\coth}{#2}%
  }%
}%


%% Exponential and logarithmic functions with parentheses around argument
% Parentheses around exp
\DeclareDocumentCommand{\pexp}{ s m }{%
  \IfBooleanTF{#1}{%
    \prtrig*{\exp}{#2}%
  }{%
    \prtrig{\exp}{#2}%
  }%
}%

% Parentheses around logarithm base 10
\DeclareDocumentCommand{\plog}{ s m }{%
  \IfBooleanTF{#1}{%
    \prtrig*{\log}{#2}%
  }{%
    \prtrig{\log}{#2}%
  }%
}%

% Parentheses around logarithm base 2
\DeclareDocumentCommand{\pln}{ s m }{%
  \IfBooleanTF{#1}{%
    \prtrig*{\ln}{#2}%
  }{%
    \prtrig{\ln}{#2}%
  }%
}%

% Parentheses around logarithm base e
\DeclareDocumentCommand{\plg}{ s m }{%
  \IfBooleanTF{#1}{%
    \prtrig*{\lg}{#2}%
  }{%
    \prtrig{\lg}{#2}%
  }%
}%

% Declare a nice "function of" short hand
% @see https://tex.stackexchange.com/questions/2607/spacing-around-left-and-right
% T \of{x} => T \parentheses{x}%
% T \of*{x} => T \parentheses*{x}%
% T \of[\big]{x} => T \parentheses[\big]{x}%
\DeclarePairedDelimiter\parentheses{\lparen}{\rparen}%
\DeclareDocumentCommand{\of}{ s O{} m }{%
  \IfBooleanTF{#1}{%
    \parentheses*[#2]{#3}%
  }{%
    \parentheses{#3}%
  }%
}%

\fi
% END Only load if option mathematics given
